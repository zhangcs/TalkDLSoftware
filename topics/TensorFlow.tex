%!TEX root = ../talk.tex

\section{TensorFlow}\label{sec:TF}

%%%
\subsection{Computational graph}
%%%

\begin{frame}
  \MyLogo
  \frametitle{Computational graph}  

\end{frame}

%%%
\subsection{Programming interface}
%%%

\begin{frame}
  \MyLogo
  \frametitle{Programming interface}  

\end{frame}

%%%
\subsection{Visualization}
%%%

\begin{frame}
  \MyLogo
  \frametitle{Visualization}  

\end{frame}

%%%
\subsection{Some examples}
%%%

\begin{frame}[fragile]
  \MyLogo
  \frametitle{Example 1: SoftMax}  
 
\scriptsize{
\begin{lstlisting}[language=python]
import tensorflow as tf    

X = tf.placeholder(tf.float32, [None, 28, 28, 1])     
W = tf.Variable(tf.zeros([784, 10]))    
b = tf.Variable(tf.zeros([10]))   
init = tf.initialize_all_variables() 

# model
Y= tf.nn.softmax(tf.matmul(tf.reshape(X,[-1, 784]), W) + b)  

# placeholder for correct answers    
Y_ = tf.placeholder(tf.float32, [None, 10])  

# loss function   
cross_entropy = -tf.reduce_sum(Y_ * tf.log(Y))  

# % of correct answers found in batch
is_correct = tf.equal(tf.argmax(Y,1), tf.argmax(Y_,1))  
accuracy = tf.reduce_mean(tf.cast(is_correct,tf.float32))  
\end{lstlisting}
}
%\end{tabular}

%\end{center}
%\label{default}
%\end{table}%
\end{frame}

\begin{frame}[fragile]
  \MyLogo
  \frametitle{Example 1:SoftMax}  
 
 \lstset{
                %basicstyle=\ttfamily,
                keywordstyle=\color{blue}\ttfamily,
                stringstyle=\color{red}\ttfamily,
                commentstyle=\color{green}\ttfamily,
                morecomment=[l][\color{magenta}]{\#}
} 
% \begin{table}[htdp]
%%\caption{default}
%%\begin{center}
%\begin{tabular}{l|l}
\scriptsize{
\begin{lstlisting}[language=python]
optimizer = tf.train.GradientDescentOptimizer(0.003)
train_step = optimizer.minimize(cross_entropy)

sess = tf.Session()
sess.run(init)

for i in range(10000):
	# load batch of images and correct answers
	batch_X, batch_Y = mnist.train.next_batch(100)
       	train_data={X: batch_X, Y_: batch_Y}

	# train
	sess.run(train_step, feed_dict=train_data)

	# success ? add code to print it
	a,c = sess.run([accuracy, cross_entropy], feed=train_data)

	# success on test data ?
	test_data={X:mnist.test.images, Y_:mnist.test.labels}
	a,c = sess.run([accuracy, cross_entropy], feed=test_data)
\end{lstlisting}
}

%\end{tabular}

%\end{center}
%\label{default}
%\end{table}%
\end{frame}